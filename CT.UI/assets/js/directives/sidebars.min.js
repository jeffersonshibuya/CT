"use strict";app.directive("sidebar",["$document","$rootScope",function(n,t){return{replace:!1,restrict:"C",link:function(i,r,u){var e=!0;(u.closeOnOuterClicks=="false"||u.closeOnOuterClicks=="0")&&(e=!1);var s=function(n,t){for(var i=n;i.length>0;){if(i[0]===t[0])return i=null,!0;i=i.parent()}return i=null,!1},f=function(n){if(!s(angular.element(n.target),r))return t.toggle(u.id,"off"),n.preventDefault(),!1},o=angular.noop();e&&(o=t.$on("clip-two.toggled",function(t,i,r){i==u.id&&(r?setTimeout(function(){n.on("click tap",f)},300):n.off("click tap",f))}));i.$on("$destroy",function(){o();n.off("click tap",f)})}}}]).directive("searchForm",function(){return{restrict:"AC",link:function(n,t){var u=$(".app-aside"),i=t.children("form"),f=t.parent(),r;$(".s-open").on("click",function(n){i.prependTo(u);n.preventDefault();$(document).on("mousedown touchstart",r)});$(".s-remove").on("click",function(n){i.appendTo(t);n.preventDefault()});r=function(n){i.is(n.target)||i.has(n.target).length!==0||($(".s-remove").trigger("click"),$(document).off("mousedown touchstart",r))}}}}).directive("appAside",["$window","$rootScope","$timeout","APP_MEDIAQUERY",function(n,t,i,r){function o(){f.trigger("mouseleave")}function a(){return l.hasClass("touch")}function h(){return s.width()<r.desktop}function c(){return $(".app-sidebar-closed").length}function e(){return $(".app-sidebar-fixed").length}var l=$("html"),s=$(n),u,f=$(".app-aside");return{restrict:"AC",link:function(n,i){var v=a()?"click":"mouseenter",r="",l;i.on("click","a",function(n){(u=$(this),!c()||h()||u.closest("ul").hasClass("sub-menu"))&&(u.closest("ul").find(".open").not(".active").children("ul").not(u.next()).slideUp(200).parent(".open").removeClass("open"),u.next().is("ul")&&u.parent().toggleClass("open")?(u.next().slideToggle(200,function(){s.trigger("resize")}),n.stopPropagation(),n.preventDefault()):t.toggle("sidebar","off"))});i.on(v,"a",function(){if(c()&&!h()&&(u=$(this),!u.parent().hasClass("hover")&&!u.closest("ul").hasClass("sub-menu"))){o();u.parent().addClass("hover");l=u.find(".item-inner").clone();u.parent().hasClass("active")&&l.addClass("active");var n=$("#sidebar").position().top,t=e()?u.parent().position().top+n:u.parent().position().top;if(l.css({position:e()?"fixed":"absolute",height:u.outerHeight(),top:t}).appendTo(f),u.next().is("ul"))r=u.next().clone(!0),r.appendTo(f).css({top:l.position().top+u.outerHeight(),position:e()?"fixed":"absolute"}),u.parent().position().top+u.outerHeight()+n+r.height()>s.height()&&e()?r.css("bottom",0):r.css("bottom","auto"),f.children().first().scroll(function(){e()&&o()}),setTimeout(function(){if(!f.is(":empty"))$(document).on("click tap",o)},300);else{r="";return}}});f.on("mouseleave",function(){$(document).off("click tap",o);$(".hover",f).removeClass("hover");$("> .item-inner",f).remove();$("> ul",f).remove()});t.$on("$locationChangeSuccess",function(){var n;n=window.location.hash;angular.forEach(i.find(".main-navigation-menu a"),function(t){var r=angular.element(t),i,u;t.hash===n&&(!c()||h())&&(r.closest("ul").hasClass("sub-menu")?(i=r.closest("ul"),u=i,i.slideDown(200).parent().siblings().children(".sub-menu").slideUp(200,function(){$(this).parent().removeClass("open")})):$(".sub-menu").slideUp(200,function(){$(this).parent().removeClass("open")}));u=null;i=null})})}}}]);